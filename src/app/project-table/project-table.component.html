<div class="table-content">
    <div class="search-group">
        <span [class]="classImageSearch"></span>
        <input class="search-text" type="text" [(ngModel)]="searchPattern"
        (keyup)="search()" (focus)="onFocus()" (blur)="onBlur()"/>
    </div>
    <div class="table">
        <table>
            <tr class="table-header">
                <th style="width: 2%;" >
                    Project
                </th>
                <th (click)="sortProject()" style="cursor: pointer;"><span><i id="sort-project" class="fa fa-angle-down"></i></span></th>
                <th style="width: 20%">Client</th>
                <th style="width: 12%">Tracked time (h:m)</th>
                <th style="width: 20%">Members</th>
                <th style="width: 20%"></th>
            </tr>
            <tbody *ngFor="let project of _projects.slice((current_page -1)*rowOfPage, current_page*rowOfPage); let i = index;">
                <tr class="project-line" (click)="projectDetails(project)" (mouseover)='showProjectControl(true, i)' (mouseleave)='showProjectControl(false, i)' >
                    <td>
                        <div class="project-bacground" [style.background]="project.background | gradient"></div>
                    </td>
                    <td><div class="column-text"> {{project.name}} </div></td>
                    <td class="column-text">{{project.client.name}}</td>
                    <td class="column-text">{{project.tracked_time | timeFromSeconds}}</td>
                    <td class="column-text">
                        <div class="project-user inline-block" >
                            <div *ngIf="project.members">
                                <div *ngFor="let member of project.members.slice(0,3)">
                                    <div  *ngIf="!member.image" class="oval user-avatar"></div>
                                    <div *ngIf="member.image" class="oval" [ngStyle]="{'background-image': 'url('+member.image+')'}" ></div>
                                </div>
                            </div>
                        </div>
                        <div class="over-member inline" *ngIf="project.members.length > 3">
                            <div class="oval">
                                <div class="text">
                                    +{{project.members.length - 3}}
                                </div>
                            </div>
                        </div>
                    </td>
                    <td  style="min-width: 128px;">
                        <div class="project-user" id="project-control-{{i}}" style="display: none;">
                            <div class="oval" (click)="save()">
                                <div class="text">
                                    <i class="fa fa-download" aria-hidden="true"></i>
                                </div>
                            </div>
                            <div class="oval" (click)="delete()">
                                <div class="text">
                                    <i class="fa fa-trash" aria-hidden="true"></i>
                                </div>
                            </div>
                            <div class="oval" (click)="edit(project)">
                                <div class="text">
                                    <i class="fa fa-pencil" aria-hidden="true"></i>
                                </div>
                            </div>
                        </div>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</div>
<div id="projects-paginate" ><p-paginator rows="{{rowOfPage}}" totalRecords="{{projects.length}}" (onPageChange)="paginates($event)" (onLoad)="changeIconPaginate()"></p-paginator></div>
