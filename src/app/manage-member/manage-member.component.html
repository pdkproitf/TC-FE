<app-member-menu-bar [currentState]="4"></app-member-menu-bar>
<div class="container">
    <ul class="nav-bar">
        <li [class]="navClass[0]" (click)="changeNavClass(0)" ><p>Employees</p></li>
        <li [class]="navClass[1]" (click)="changeNavClass(1)"><p>Invites</p></li>
        <li [class]="navClass[2]" (click)="changeNavClass(2)"><p>Clients</p></li>
        <li [class]="navClass[3]" (click)="changeNavClass(3)"><p>Holidays</p></li>
        <li [class]="navClass[4]" (click)="changeNavClass(4)"><p>Jobs</p></li>
        <li class="export">
            <p-menu #menu popup="popup" [model]="items"></p-menu>
            <button pButton type="button" label="Export" icon="fa-caret-down" (click)="menu.toggle($event)" iconPos="right"></button>
        </li>
    </ul>

    <div class="member-manage">
        <div class="member-list">
            <table>
                <thead>
                    <tr>
                        <th width="5%"><th>
                        <th width="25%">Name</th>
                        <th width="35%">Jobs</th>
                        <th width="8%">Role</th>
                        <th width="9%" style="padding-left: 1%;">Days Off</th>
                        <th max-width="99%" style="text-align: center"></th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let employee of members; let id = index;">
                        <td class="avatar" width="5%"><img src="assets/image-profile/default-avatar.png"></td>
                        <td class="name" width="25%">
                            <p class="full-name">{{employee.user.first_name}} {{employee.user.last_name}}<p>
                            <p class="email">{{employee.user.email}}</p>    
                        </td>
                        <td class="jobs" width="35%">
                            <div>
                                <div *ngFor="let job of employee.jobs" class="job">{{job.name}}<span class="fa fa-times"></span></div>
                            </div>
                            <input type=text placeholder="Add job">
                            <div class="submit">
                                <span class="fa fa-check" aria-hidden="true"></span>                            
                                <span class="fa fa-times" aria-hidden="true"></span>
                            </div>                      
                            <div *ngIf="id === 0" class="job-selector">
                                <ul class="job-ul">
                                    <li *ngFor="let job of currentJobs; let i = index" class="job-li">{{job.name}}</li>
                                    <li class="job-li" (mousedown)="displayAddJob = true;">Add new job</li>
                                </ul>
                            </div>
                        </td>
                        <td class="role" width="8%">
                            <select [value]="roles.indexOf(employee.role.name)">
                                <option value=0>Admin</option>
                                <option value=1>PM</option>
                                <option value=2>Member</option>
                            </select>
                        </td>
                        <td class="days-off" width="8%">
                            {{employee.furlough_total}}
                        </td>
                        <td class="actions" max-width="99%">
                            <div class="action-items">
                                <div class="oval">
                                    <span class="fa fa-download" aria-hidden="true"></span>
                                </div>
                                <div class="oval">
                                    <span class="fa fa-trash" aria-hidden="true"></span>
                                </div>
                                <div class="oval">
                                    <span class="fa fa-pencil" aria-hidden="true"></span>
                                </div>
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
            <p-dialog header="Add New Job" [(visible)]="displayAddJob" width="600">
                <div class="form-container">
                <form (ngSubmit)="onSubmitJob()">
                    <div class="form-group">
                        <input style="width:100%;" type="text" class="form-control" placeholder="New Job Name"
                        name="job-name" [(ngModel)]="newJobName" required><br/><br/>
                        <button class="active" type="submit">Add New</button>
                        <button type="button" (click)="displayAddJob = false; newJobName = '';">Cancel</button>
                    </div>
                </form>
                </div>
            </p-dialog>
        </div>
        <br/>

        <div class="member-action">
            <button class="add-btn" (click)="displayDialog()" pButton type="button" label="Add new member"></button>
        </div>

        <p-dialog header="Add New Member" [(visible)]="display" width="600">
            <div class="form-container">
            <form (ngSubmit)="onSubmitMember()">
                    <div class="form-group">
                    <input style="width:100%;" type="text" class="form-control" id="client-name" placeholder="Email"
                    name="email" [(ngModel)]="membership.email" required><br/><br/>
                    <button class="active" type="submit">Create New</button>
                    <button type="button" (click)="undisplayDialog()">Cancel</button>
                </div>
            </form>
            </div>
        </p-dialog>

    </div>
</div>

<p-growl [value]="msgs"></p-growl>
